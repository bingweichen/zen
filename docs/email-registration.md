# 邮箱注册功能实现指南

1. 用户注册
   1. 邮箱 + 验证码 + 密码（邮箱就是用户名）
2. 用户登录
   1. 用户名/邮箱 + 密码
3. 重置密码
   1. 邮箱/用户名 + 验证码 + 新密码

1. 生成临时验证码，存入数据库
2. 发送邮件

---

## 邮箱注册功能实现补充

### 1. 注册流程

1. 用户在注册页面输入邮箱和密码，点击“获取验证码”。
2. 系统生成一个临时验证码（如6位数字），保存到数据库（或缓存），并设置有效期（如5分钟）。
3. 系统向用户输入的邮箱发送验证码邮件。
4. 用户收到验证码后，填写到注册页面，提交邮箱、验证码和密码。
5. 后端校验验证码是否正确且未过期，校验通过后完成注册，创建新用户记录。
6. 注册成功后，可自动登录或跳转到登录页面。

### 2. 主要接口设计

- POST /api/auth/register
  - 参数：邮箱、验证码、密码
  - 功能：校验验证码，注册新用户

- POST /api/auth/send-code
  - 参数：邮箱
  - 功能：生成验证码并发送邮件

### 3. 数据库设计建议

- 用户表（User）：id, email, password_hash, created_at, ...
- 验证码表（EmailVerificationCode）：id, email, code, expires_at, used, created_at

### 4. 邮件发送

- 推荐使用第三方邮件服务（如SendGrid、Mailgun、阿里云邮件推送等）。
- 邮件内容应包含验证码及有效期提示。

### 5. 安全建议

- 验证码应有过期时间，且每个邮箱短时间内请求次数有限制（防止滥用）。
- 注册成功后，验证码应标记为已使用，防止重复注册。
- 密码应加密存储（如bcrypt）。

---

## 开发 TODO 列表

1. 设计并实现用户注册页面，包含邮箱、密码、验证码输入框及获取验证码按钮。
2. 实现后端接口：POST /api/auth/send-code，生成验证码并发送邮件。
3. 实现后端接口：POST /api/auth/register，校验验证码并注册新用户。
4. 设计并实现验证码存储机制（如数据库或缓存），包含有效期和使用状态。
5. 集成第三方邮件服务，实现邮件发送功能。
6. 对验证码请求频率进行限制，防止滥用。
7. 注册成功后，自动登录或跳转到登录页面。
8. 密码加密存储，确保安全性。
9. 编写相关单元测试和集成测试。
10. 完善异常处理和用户提示信息。

